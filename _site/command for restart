chcp 65001
Remove-Item -Path "_site" -Recurse -Force
Remove-Item -Path "_blog" -Recurse -Force
ruby generate_majstori.rb
ruby generate_article.rb
bundle exec jekyll build --verbose
bundle exec jekyll serve





# 1. Set Windows console to UTF-8
chcp 65001

# 2. Clean up old build files
Remove-Item -Path "_site" -Recurse -Force
Remove-Item -Path "_blog" -Recurse -Force

# 3. Run custom Ruby generation scripts
ruby generate_majstori.rb
ruby generate_article.rb

# 4. CRITICAL FIX: Set environment to 'production' for the build command
# This forces the SEO tag and Sitemap plugins to use 'https://ejmajstore.rs'
$env:JEKYLL_ENV="production"
bundle exec jekyll build --verbose
# $env:JEKYLL_ENV="development" # REMOVED: Do NOT reset the environment here!

# 5. Serve locally (The 'jekyll serve' command will now inherit JEKYLL_ENV="production"
# which prevents its implicit rebuild from overwriting the sitemap/canonical URLs
# with 'localhost' links.)
bundle exec jekyll serve